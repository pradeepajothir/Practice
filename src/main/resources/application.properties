spring.application.name=example
spring.data.mongodb.uri=mongodb://localhost:27017/mydb
logging.level.io.github.resilience4j.circuitbreaker=DEBUG
logging.level.io.github.resilience4j.retry=DEBUG
spring.jackson.deserialization.fail-on-unknown-properties=true


# ===== Kafka Bootstrap Servers =====
spring.kafka.bootstrap-servers=localhost:9092

# ===== Producer Config =====
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.client-id=my-producer

# ===== Consumer Config =====
spring.kafka.consumer.group-id=my-group
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.enable-auto-commit=true

# ===== General Kafka Settings (Optional) =====
# spring.kafka.listener.concurrency=3
# spring.kafka.template.default-topic=my-topic

# ===== Logging (Optional, for debug) =====
logging.level.org.apache.kafka=INFO
logging.level.org.springframework.kafka=INFO

# Expose all actuator endpoints
management.endpoints.web.exposure.include=*

# Optional: Restrict to specific endpoints instead
# management.endpoints.web.exposure.include=health,info,circuitbreakers

# Optional: Enable detailed info
management.endpoint.circuitbreakers.enabled=true

# Enable all actuator web endpoints
management.endpoints.web.base-path=/actuator

# Circuit breaker settings for 'backendA'
resilience4j.retry.instances.backendA.max-attempts=3
resilience4j.retry.instances.backendA.wait-duration=500ms
resilience4j.retry.instances.backendA.retry-exceptions=java.io.IOException,java.net.SocketTimeoutException,java.lang.RuntimeException
resilience4j.retry.instances.backendA.ignore-exceptions=java.lang.IllegalArgumentException

resilience4j.circuitbreaker.instances.backendA.failure-rate-threshold=90
resilience4j.circuitbreaker.instances.backendA.minimum-number-of-calls=100
resilience4j.circuitbreaker.instances.backendA.sliding-window-size=10
resilience4j.circuitbreaker.instances.backendA.sliding-window-type=COUNT_BASED
resilience4j.circuitbreaker.instances.backendA.permitted-number-of-calls-in-half-open-state=3
resilience4j.circuitbreaker.instances.backendA.wait-duration-in-open-state=50s
resilience4j.circuitbreaker.instances.backendA.automatic-transition-from-open-to-half-open-enabled=true
resilience4j.circuitbreaker.instances.backendA.ignore-exceptions=java.lang.IllegalArgumentException

resilience4j.ratelimiter.instances.backendA.limit-for-period=5
resilience4j.ratelimiter.instances.backendA.limit-refresh-period=1s
resilience4j.ratelimiter.instances.backendA.timeout-duration=500ms
